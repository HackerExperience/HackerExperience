--------------------------------------------------------------------------------
----------------------------------- SELECTS ------------------------------------
--------------------------------------------------------------------------------

-- :by_instance_id
SELECT * FROM tasks WHERE instance_id = ?;

-- :by_completion_date_lte
SELECT * FROM tasks WHERE completion_date <= ?;

--------------------------------------------------------------------------------
----------------------------------- INSERTS ------------------------------------
--------------------------------------------------------------------------------

-- :__insert
INSERT INTO tasks (
  instance_id,
  run_id,
  entity_id,
  server_id,
  type,
  target_id,
  target_sub_id,
  scheduled_at,
  completion_date,
  next_backoff,
  failed_attempts
)
VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
RETURNING *;

--------------------------------------------------------------------------------
----------------------------------- DELETES ------------------------------------
--------------------------------------------------------------------------------

-- :delete_by_instance_id
DELETE FROM tasks WHERE instance_id = ?;
